<% content_for :head do %>
<%= render partial: "edit/head_menu" %>
<% end %>

<h1>設定</h1>

<% unless notice.nil? %>
<div class="alert alert-success">
  <%= notice %>
</div>
<% end %>

<% unless alert.nil? %>
<div class="alert alert-error">
  <ul class="unstyled">
    <% alert.full_messages.each do |msg| %>
    <li><%= msg %></li>
    <% end %>
  </ul>
</div>
<% end %>

<%= form_for(@user, url: {controller: :users, action: (@user.name.nil? ? "create" : "update"), id: @user.id}, html: {class: "form-inline"}) do |f| %>
<label>
  ラジオネーム
  <%= f.text_field :name, placeholder: "名前を入れて下さい", required: "", maxlength: 20 %>
</label>
<%= f.submit "保存する", class: "btn" %>
<% end %>

<% if @user.name.nil? %>
<div class="alert alert-info">
  ラジオネームを保存すると番組を作れます
</div>
<% else %>
<%= link_to "番組を作る", new_channel_path, class: "btn btn-primary" %>
<% end %>

<% unless @channels.nil? || @channels.empty? %>
<br /><br />
<table class="table table-striped table-hover table-condensed">
  <% @channels.each do |channel| %>
  <tr>
    <td><%= channel.name %></td>
    <td><%= channel.description %></td>
    <td>
      <%= link_to " 編集", channel, class: "icon-pencil" %>
    </td>
    <td>
      <%= link_to " 削除", channel, method: :delete, data: { confirm: "本当に削除しますか？" }, class: "icon-trash" %>
    </td>
  </tr>
  <% end %>
</table>
<% end %>
